function marianneCollapseMenuOnClickOutside(e){document.getElementById("menu-primary").contains(e.target)||document.getElementById("menu-primary").querySelectorAll(".sub-menu-toggle").forEach(function(e){e.setAttribute("aria-expanded","false")})}function marianneToggleAriaExpanded(e,t){"true"!==e.getAttribute("aria-expanded")?(e.setAttribute("aria-expanded","true"),t&&document.addEventListener("click",marianneCollapseMenuOnClickOutside)):(e.setAttribute("aria-expanded","false"),t&&document.addEventListener("click",marianneCollapseMenuOnClickOutside))}function marianneExpandSubMenu(e){window.matchMedia("(min-width: 500px)").matches?(e.closest("nav").querySelectorAll(".sub-menu-toggle").forEach(function(t){t!==e&&t.setAttribute("aria-expanded","false")}),marianneToggleAriaExpanded(e,!0),e.parentNode.querySelectorAll("ul > li:last-child > a").forEach(function(t){t.addEventListener("blur",function(t){e.parentNode.contains(t.relatedTarget)||e.setAttribute("aria-expanded","false")})})):e.removeAttribute("aria-haspopup").removeAttribute("aria-expanded")}function marianneExpandMobileMenu(e){"true"!==e.getAttribute("aria-expanded")?e.setAttribute("aria-expanded","true"):e.setAttribute("aria-expanded","false")}!function(e){function t(t){var a=t+" ";window.matchMedia("(max-width: 500px)").matches||window.matchMedia("(hover: none)").matches?(e(a+".sub-menu-toggle").removeAttr("aria-haspopup"),e(a+".sub-menu-toggle").removeAttr("aria-expanded"),e("#menu-mobile-button").attr("aria-haspopup","true").attr("aria-expanded","false"),document.addEventListener("keydown",function(t){27===t.keyCode&&e("#menu-mobile-button").attr("aria-expanded","false")})):(e(a+".sub-menu-toggle").attr("aria-haspopup")&&e(a+".sub-menu-toggle").attr("aria-expended")||(e(a+".sub-menu-toggle").attr("aria-haspopup","true"),e(a+".sub-menu-toggle").attr("aria-expanded","false")),e(a+".menu-item-has-children").hover(function(){e(this).find(".sub-menu-toggle").attr("aria-expanded")&&e(this).find(".sub-menu-toggle").attr("aria-expanded","true")},function(){e(this).find(".sub-menu-toggle").attr("aria-expanded")&&e(this).find(".sub-menu-toggle").attr("aria-expanded","false")}),e(a+".sub-menu a").focus(function(t){e(this).parents(".menu-item-has-children").find(".sub-menu-toggle"),e(this).parents(".menu-item-has-children").find(".sub-menu-toggle").attr("aria-expanded")&&e(this).parents(".menu-item-has-children").find(".sub-menu-toggle").attr("aria-expanded","true")}),e(a+".sub-menu a").blur(function(){e(this).parents(".menu-item-has-children").find(".sub-menu-toggle").attr("aria-expanded")&&e(this).parents(".menu-item-has-children").find(".sub-menu-toggle").attr("aria-expanded","false")}),e(a+".sub-menu-toggle").focus(function(t){e(this).closest(".menu-item-has-children").find(".sub-menu-toggle").attr("aria-expanded")&&e(this).closest(".menu-item-has-children").find(".sub-menu-toggle").attr("aria-expanded","true")}),e(a+".sub-menu-toggle").blur(function(){e(this).closest(".menu-item-has-children").find(".sub-menu-toggle").attr("aria-expanded")&&e(this).closest(".menu-item-has-children").find(".sub-menu-toggle").attr("aria-expanded","false")}),document.addEventListener("keydown",function(t){27===t.keyCode&&e(".sub-menu-toggle").attr("aria-expanded","false")}))}e("#menu-primary .menu-item").each(function(t,a){e(a).children("a").attr("role","menu-item"),e(a).children("a").attr("tabindex","0")}),e(window).on("load",function(){t("#menu-primary")}),e(window).on("resize",function(){t("#menu-primary")})}(jQuery);
