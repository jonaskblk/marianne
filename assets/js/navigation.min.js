function marianneCollapseMenuOnClickOutside(e){document.getElementById("menu-primary").contains(e.target)||document.getElementById("menu-primary").querySelectorAll(".sub-menu-toggle").forEach(function(e){e.setAttribute("aria-expanded","false")})}function marianneToggleAriaExpanded(e,a){"true"!==e.getAttribute("aria-expanded")?(e.setAttribute("aria-expanded","true"),a&&document.addEventListener("click",marianneCollapseMenuOnClickOutside)):(e.setAttribute("aria-expanded","false"),a&&document.addEventListener("click",marianneCollapseMenuOnClickOutside))}function marianneExpandSubMenu(e){window.matchMedia("(min-width: 500px)").matches?(e.closest("nav").querySelectorAll(".sub-menu-toggle").forEach(function(a){a!==e&&a.setAttribute("aria-expanded","false")}),marianneToggleAriaExpanded(e,!0),e.parentNode.querySelectorAll("ul > li:last-child > a").forEach(function(a){a.addEventListener("blur",function(a){e.parentNode.contains(a.relatedTarget)||e.setAttribute("aria-expanded","false")})})):e.removeAttribute("aria-haspopup").removeAttribute("aria-expanded")}function marianneAriaExpand(e){"true"!==e.getAttribute("aria-expanded")?e.setAttribute("aria-expanded","true"):e.setAttribute("aria-expanded","false")}!function(e){function a(a){var t=a+" ";window.matchMedia("(max-width: 500px)").matches||window.matchMedia("(hover: none)").matches?(e(t+".sub-menu-toggle").removeAttr("aria-haspopup"),e(t+".sub-menu-toggle").removeAttr("aria-expanded"),e("#menu-mobile-button").attr("aria-haspopup","true").attr("aria-expanded","false"),e("#header-search-button").attr("aria-expanded","false"),e("body").hasClass("search")||e(".header-search-box").hide(),e(document).keydown(function(a){27===a.keyCode&&(e("#menu-mobile-button").attr("aria-expanded","false"),e("#header-search-button").attr("aria-expanded","false"),e("body").hasClass("search")||e(".header-search-box").hide())}),e(document).mouseup(function(a){var t=e("#menu-primary-container"),n=e(".header-search-box");t.is(a.target)||0!==t.has(a.target).length||n.is(a.target)||0!==n.has(a.target).length||(e("#menu-mobile-button").attr("aria-expanded","false"),e("#header-search-button").attr("aria-expanded","false"),e("body").hasClass("search")||e(".header-search-box").hide())}),e("#menu-mobile-button").click(function(){e("#header-search-button").attr("aria-expanded","false"),e("body").hasClass("search")||e(".header-search-box").hide()})):(e(t+".sub-menu-toggle").attr("aria-haspopup")&&e(t+".sub-menu-toggle").attr("aria-expended")||(e(t+".sub-menu-toggle").attr("aria-haspopup","true"),e(t+".sub-menu-toggle").attr("aria-expanded","false")),e(t+".menu-item-has-children").hover(function(){e(this).find(".sub-menu-toggle").attr("aria-expanded")&&e(this).find(".sub-menu-toggle").attr("aria-expanded","true")},function(){e(this).find(".sub-menu-toggle").attr("aria-expanded")&&e(this).find(".sub-menu-toggle").attr("aria-expanded","false")}),e(t+".sub-menu a").focus(function(){e(this).parents(".menu-item-has-children").find(".sub-menu-toggle").attr("aria-expanded")&&e(this).parents(".menu-item-has-children").find(".sub-menu-toggle").attr("aria-expanded","true")}),e(t+".sub-menu a").blur(function(){e(this).parents(".menu-item-has-children").find(".sub-menu-toggle").attr("aria-expanded")&&e(this).parents(".menu-item-has-children").find(".sub-menu-toggle").attr("aria-expanded","false")}),e(t+".sub-menu-toggle").focus(function(){e(this).closest(".menu-item-has-children").find(".sub-menu-toggle").attr("aria-expanded")&&e(this).closest(".menu-item-has-children").find(".sub-menu-toggle").attr("aria-expanded","true")}),e(t+".sub-menu-toggle").blur(function(){e(this).closest(".menu-item-has-children").find(".sub-menu-toggle").attr("aria-expanded")&&e(this).closest(".menu-item-has-children").find(".sub-menu-toggle").attr("aria-expanded","false")}),document.addEventListener("keydown",function(a){27===a.keyCode&&e(".sub-menu-toggle").attr("aria-expanded","false")}))}e("#menu-primary .menu-item").each(function(a,t){e(t).children("a").attr("role","menu-item"),e(t).children("a").attr("tabindex","0")}),e(window).on("load",function(){a("#menu-primary")}),e(window).on("resize",function(){a("#menu-primary")}),e("body").hasClass("search")?e(".header-search-box").show():e("#header-search-button").click(function(){e(".header-search-box").toggle(),e(this).attr("aria-expanded",function(e,a){return"false"===a?"true":"false"})})}(jQuery);
